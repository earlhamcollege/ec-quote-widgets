<div class="ec-quote-container-{{ data.widget.quote_container_color }}">

  <div id="slides">
    {% for item in data.widget.quote_array %}
      {% if loop.first %}
        <div class="slide showing">
      {% else %}
        <div class="slide">
      {% endif %}

      <div class="ec-quote-content"> {{ apos.areas.richText(item.quote) }} </div>
      <p class="ec-quote-author">
        <span class="ec-quote-author-color-{{ data.widget.quote_author_color }}">
          <span class="ec-quote-text-color-{{ data.widget.quote_text_color }}">
            {{ item.author }}
          </span>
        </span>
      </p>
      <p class="ec-quote-author-info"> {{ item.author_info }} </p>
      </div>

    {% endfor %}


  </div>

  {% if data.widget.nav_toggle == true %}
  <div id="slideControls slideControls-{{ data.widget.quote_container_color }}">
    {% for item in data.widget.quote_array %}
      <div class="nextBtn" onclick="pickSlide({{loop.index0}})">â€¢</div>
    {% endfor %}

  </div>
  {% endif %}

</div>
</div>

<script>
  //control vars
  var inc = {{ data.widget.speed }} * 1000
  var slides = document.querySelectorAll('#slides .slide');
  var btns = document.querySelectorAll('.nextBtn');
  btns[0].className = 'nextBtnS';
  var currentSlide = 0;
  var slideInterval = setInterval(nextSlide,inc);

  //move to next slide
  function nextSlide() {
    if(slides.length > 1){
      slides[currentSlide].className = 'slide';
      btns[currentSlide].className = 'nextBtn';
      currentSlide = (currentSlide+1)%slides.length;
      slides[currentSlide].className = 'slide showing';
      btns[currentSlide].className = 'nextBtnS';
    }
  }
  //move to prev slide
  function prevSlide() {
    if (slides.length > 1){
      slides[currentSlide].className = 'slide';
      btns[currentSlide].className = 'nextBtn';
      if (currentSlide > 0) {
        currentSlide = (currentSlide - 1);
      }else{
        currentSlide = (slides.length - 1);
      }
      slides[currentSlide].className = 'slide showing';
      btns[currentSlide].className = 'nextBtnS';
    }
  }
  //move to n slide
  function pickSlide(n) {
    clearInterval(slideInterval);
    slides[currentSlide].className = 'slide';
    btns[currentSlide].className = 'nextBtn';
    currentSlide = n;
    slides[currentSlide].className = 'slide showing';
    btns[currentSlide].className = 'nextBtnS';
    slideInterval = setInterval(nextSlide,inc);
  }
</script>
