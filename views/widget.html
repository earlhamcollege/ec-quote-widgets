<div class="ec-quote-container-{{ data.widget.quote_container_color }}">

  <div id="slides">
    {% for item in data.widget.quote_array %}
      {% if loop.first %}
        <div class="slide showing">
      {% else %}
        <div class="slide">
      {% endif %}

      <div class="ec-quote-content"> {{ apos.areas.richText(item.quote) }} </div>
      <p class="ec-quote-author">
        <span class="ec-quote-author-color-{{ data.widget.quote_author_color }}">
          <span class="ec-quote-text-color-{{ data.widget.quote_text_color }}">
            {{ item.author }}
          </span>
        </span>
      </p>
      <p class="ec-quote-author-info"> {{ item.author_info }} </p>
      </div>

    {% endfor %}


  </div>

  {% if data.widget.nav_toggle == true %}
  <div id="slideControls">
    <div id="prevBtn" onclick="prevSlide()">◀</div>
    <div id="nextBtn" onclick="nextSlide()">▶</div>
  </div>
  {% endif %}

</div>
</div>

<script>
  //control vars
  var inc = {{ data.widget.speed }} * 1000
  var slides = document.querySelectorAll('#slides .slide');
  var currentSlide = 0;
  var slideInterval = setInterval(nextSlide,inc);

  //move to next slide
  function nextSlide() {
    if(slides.length > 1){
      slides[currentSlide].className = 'slide';
      currentSlide = (currentSlide+1)%slides.length;
      slides[currentSlide].className = 'slide showing';
    }
  }

  //move to prev slide
  function prevSlide() {
    if (slides.length > 1){
      slides[currentSlide].className = 'slide';
      if (currentSlide > 0) {
        currentSlide = (currentSlide - 1);
      }else{
        currentSlide = (slides.length - 1);
      }
      slides[currentSlide].className = 'slide showing';
    }
  }
</script>
